<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>å·ç‹ç¿»è¯‘å™¨ï½œåå†…å·å®éªŒå®¤</title>
  <style>
    :root{--bg:#0f1226;--card:#171c39;--line:#2a3568;--text:#e9eeff;--muted:#a9b3da;--acc:#69b3ff;--ok:#39d98a;--warn:#ffb84d;--bad:#ff6b6b}
    *{box-sizing:border-box}body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:radial-gradient(1200px 600px at 10% 0%,#1a2250,#0f1226);color:var(--text)}
    .wrap{max-width:980px;margin:0 auto;padding:20px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px}
    h1{margin:4px 0 6px} p{color:var(--muted)}
    textarea{width:100%;min-height:92px;background:#0f1430;border:1px solid #34427e;color:var(--text);border-radius:12px;padding:12px;font-size:15px}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    button{border:1px solid #3d4f96;background:#1b2551;color:#dfe7ff;padding:10px 14px;border-radius:10px;cursor:pointer}
    button.primary{background:#2463d6;border-color:#2c6ce0}
    .out{margin-top:14px;padding:14px;border:1px dashed #4462b3;border-radius:12px;background:#10173a}
    .score{font-weight:700}
    .lv{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;margin-left:6px}
    .lv.low{background:#173b2a;color:#8ff0be}.lv.mid{background:#4b3b14;color:#ffd58a}.lv.high{background:#5a1f24;color:#ff9da3}
    .chips span{display:inline-block;margin:4px 6px 0 0;padding:3px 8px;border-radius:999px;background:#1e2a59;color:#b8c8ff;font-size:12px}
    .footer{margin-top:12px;font-size:12px;color:#8f9ccc}
    .layout{display:grid;grid-template-columns:1.2fr .8fr;gap:14px}
    .rank{margin-top:14px;padding:14px;border:1px solid #3752a0;border-radius:12px;background:#10173a}
    .rank h3{margin:0 0 10px}
    .rank ol{margin:0;padding-left:20px}
    .rank li{margin:7px 0;color:#c8d5ff}
    .pill{font-size:12px;color:#8fb6ff;border:1px solid #35519a;border-radius:999px;padding:1px 7px;margin-left:6px}
    .empty{color:#90a0d4}
    @media (max-width:900px){.layout{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="layout">
      <div class="card">
        <h1>å·ç‹ç¿»è¯‘å™¨ ğŸŒ€</h1>
        <p>è¾“å…¥åŒäº‹è¯æœ¯ï¼Œè‡ªåŠ¨è¾“å‡ºï¼šçœŸå®ç¿»è¯‘ + å·åº¦è¯„åˆ† + æç¬‘åº”å¯¹ç­–ç•¥ã€‚</p>
        <div class="chips"><span>èŒåœºé»‘è¯ç¿»è¯‘</span><span>å·åº¦æ£€æµ‹</span><span>ä¸€é”®å¤åˆ¶</span><span>ä»Šæ—¥æœ€å·æ¦œ</span></div>

        <textarea id="input" placeholder="ä¾‹ï¼šè¿™ä¸ªéœ€æ±‚å¾ˆç®€å•ï¼Œä½ ä»Šæ™šé¡ºæ‰‹æ”¹ä¸€ä¸‹å°±è¡Œ"></textarea>
        <div class="row">
          <button class="primary" id="analyze">å¼€å§‹ç¿»è¯‘</button>
          <button id="random">æ¥ä¸€å¥éšæœºå·è¯</button>
          <button id="copy">å¤åˆ¶ç»“æœ</button>
          <button id="clearRank">æ¸…ç©ºæ’è¡Œæ¦œ</button>
        </div>

        <div class="out" id="out">ç­‰ä½ è¾“å…¥ä¸€å¥â€œé«˜èƒ½èŒåœºé»‘è¯â€...</div>
        <div class="footer">ä»…ä¾›å¨±ä¹ï¼Œä¸æ„æˆåŠ³åŠ¨å…³ç³»æ³•å¾‹å»ºè®® ğŸ˜„</div>
      </div>

      <div class="card rank">
        <h3>ğŸ† ä»Šæ—¥æœ€å·é‡‘å¥ TOP 10</h3>
        <ol id="rankList"></ol>
      </div>
    </div>
  </div>

  <script>
    const examples = [
      'è¿™ä¸ªéœ€æ±‚å¾ˆç®€å•ï¼Œä½ ä»Šæ™šé¡ºæ‰‹æ”¹ä¸€ä¸‹å°±è¡Œ',
      'å…ˆå¯¹é½ä¸€ä¸‹ï¼ŒåŠå°æ—¶å°±å¥½',
      'ä½ æ–¹ä¾¿çš„æ—¶å€™çœ‹ä¸‹ï¼Œä»Šå¤©æœ€å¥½ç»™æˆ‘',
      'å‘¨æœ«åˆ«é—²ç€ï¼Œæˆ‘ä»¬å†²ä¸€ä¸‹ç‰ˆæœ¬',
      'è¿™ä¸ªå…ˆä¸æ€¥ï¼Œä½†ä½ å…ˆåšå‡ºæ¥ç»™æˆ‘çœ‹çœ‹',
      'å¤§å®¶éƒ½å¾ˆè¾›è‹¦ï¼Œå†åšæŒä¸€ä¸‹',
      'è¿™ä¸ªä¸å¤æ‚ï¼Œæ˜æ—©ä¸Šä¼šå‰ç»™ä¸ªdemoå°±è¡Œ',
      'å’±ä»¬å…ˆå¿«é€Ÿè¿‡ä¸€ç‰ˆï¼Œç»†èŠ‚åé¢å†è¡¥',
      'ä»Šå¤©å…ˆä¸ä¸‹ç­äº†ï¼ŒæŠŠè¿™æ³¢éœ€æ±‚é—­ç¯',
      'ä½ ä¸æ˜¯åšå¾—å¿«å—ï¼Œè¿™ä¸ªå°±ä½ æ¥å§',
      'è¿™äº‹è€æ¿å…³æ³¨ï¼Œä½ å…ˆé¡¶ä¸€ä¸‹',
      'æˆ‘ä»¬å°æ­¥å¿«è·‘ï¼Œä»Šæ™šå…ˆè·‘èµ·æ¥',
      'è¿™ä¸ªä¸ç®—åŠ ç­ï¼Œç®—è‡ªæˆ‘æˆé•¿',
      'å…ˆæ‹‰ä¸ªä¼šï¼Œå¼€å®Œå†å¼€ä¸ªå°ä¼šå®šç»†èŠ‚',
      'ä¸ç”¨å¤ªå®Œç¾ï¼Œå…ˆåšåˆ°èƒ½ä¸Šçº¿',
      'æˆ‘æŠŠä½ æ‹‰è¿›ç¾¤äº†ï¼Œä½ åŒæ­¥æ¨è¿›ä¸€ä¸‹',
      'è¿™ä¸ªæ’æœŸå…ˆåˆ«å†™äº†ï¼Œå…ˆæŠŠæ´»åšäº†',
      'ä½ å…ˆå«ä¸€ä¸‹ï¼Œåé¢æˆ‘è¡¥èµ„æº',
      'è¿™ç‰ˆå…ˆhotfixä¸€ä¸‹ï¼Œé•¿æœŸæ–¹æ¡ˆå†è¯´',
      'éœ€æ±‚ä¸´æ—¶æ”¹äº†ä¸å¤šï¼Œå°±é‡åšä¸€é'
    ];

    const rules = [
      {kw:['ç®€å•','é¡ºæ‰‹','ä¸€ä¸‹'], add:3, truth:'â€œç®€å•â€â‰ˆéšè—å¤æ‚åº¦ï¼›â€œé¡ºæ‰‹â€â‰ˆé»˜è®¤åŠ ç­ã€‚', reply:'æ”¶åˆ°ï¼Œæˆ‘å…ˆæ’æœŸè¯„ä¼°ï¼Œé¢„è®¡æ˜å¤©ç»™ä½ æ˜ç¡®æ—¶é—´ã€‚'},
      {kw:['å¯¹é½','åŒæ­¥','å¼€ä¸ªä¼š','å†å¼€ä¸ªå°ä¼š'], add:2, truth:'â€œå¯¹é½â€â‰ˆä¼šè®®å¯èƒ½æ¯”éœ€æ±‚è¿˜é•¿ã€‚', reply:'å¯ä»¥ï¼Œå…ˆå¼‚æ­¥å†™æ¸…ç›®æ ‡å’Œè¾“å…¥ï¼Œå‡å°‘æ— æ•ˆä¼šã€‚'},
      {kw:['æ–¹ä¾¿','æœ‰ç©º','æœ€å¥½ä»Šå¤©','æ˜æ—©ä¸Šä¼šå‰'], add:3, truth:'â€œæ–¹ä¾¿æ—¶â€â‰ˆâ€œç°åœ¨â€ï¼›â€œæœ€å¥½ä»Šå¤©â€â‰ˆâ€œå¿…é¡»ä»Šå¤©â€ã€‚', reply:'æˆ‘è¿™è¾¹æœ‰åœ¨æ’ä»»åŠ¡ï¼Œç»™ä½ ä¸¤ä¸ªå¯äº¤ä»˜æ—¶é—´ç‚¹é€‰ä¸€ä¸ªã€‚'},
      {kw:['å‘¨æœ«','å†²','åŠ ç­','å…ˆä¸ä¸‹ç­'], add:4, truth:'â€œå†²ä¸€ä¸‹â€â‰ˆæ‹¿ä¼‘æ¯æ—¶é—´æ¢çŸ­æœŸäº§å‡ºã€‚', reply:'å‘¨æœ«æˆ‘ä¸åœ¨çº¿ï¼Œå‘¨ä¸€ä¼˜å…ˆå¤„ç†å¹¶åŒæ­¥è¿›åº¦ã€‚'},
      {kw:['ä¸æ€¥','å…ˆåš','å…ˆè·‘èµ·æ¥'], add:2, truth:'â€œä¸æ€¥â€ä½†â€œå…ˆåšâ€â‰ˆéœ€æ±‚ä¼˜å…ˆçº§å£å¤´çŸ›ç›¾ã€‚', reply:'æ˜ç™½ï¼Œæˆ‘ä¼šæŒ‰ä¼˜å…ˆçº§æ± æ’é˜Ÿï¼Œå…ˆè¡¥é½éªŒæ”¶æ ‡å‡†ã€‚'},
      {kw:['è¾›è‹¦','åšæŒ','è€æ¿å…³æ³¨','é¡¶ä¸€ä¸‹'], add:2, truth:'æƒ…ç»ªé¼“åŠ±å¯èƒ½åœ¨æ©ç›–èµ„æºä¸è¶³ã€‚', reply:'å¯ä»¥æ¨è¿›ï¼Œä½†éœ€è¦æ˜ç¡®èŒƒå›´ï¼Œä¸ç„¶è´¨é‡å’ŒèŠ‚å¥éƒ½å—å½±å“ã€‚'},
      {kw:['ä½ ä¸æ˜¯åšå¾—å¿«å—','å°±ä½ æ¥å§','ä½ å…ˆå«ä¸€ä¸‹'], add:3, truth:'â€œä½ æœ€åˆé€‚â€â‰ˆä»»åŠ¡å®šå‘æŠ•å–‚ã€‚', reply:'å¯ä»¥æ¥ï¼Œä½†æˆ‘éœ€è¦æ›¿æ¢æ‰å½“å‰åŒä¼˜å…ˆçº§ä»»åŠ¡ã€‚'},
      {kw:['è‡ªæˆ‘æˆé•¿','æˆé•¿æœºä¼š','é”»ç‚¼ä¸€ä¸‹'], add:3, truth:'â€œæˆé•¿â€å¯èƒ½åœ¨æ›¿ä»£åº”æœ‰çš„äººåŠ›æŠ•å…¥ã€‚', reply:'æ„¿æ„æˆé•¿ï¼Œä¹Ÿéœ€è¦åˆç†èµ„æºå’Œæ˜ç¡®è¾¹ç•Œã€‚'},
      {kw:['hotfix','ä¸´æ—¶æ”¹','é‡åšä¸€é','å…ˆä¸Šçº¿'], add:3, truth:'â€œä¸´æ—¶æ”¹ä¸€ç‚¹â€å¸¸å¸¸æ¼”å˜æˆç»“æ„æ€§è¿”å·¥ã€‚', reply:'å…ˆç¡®è®¤å˜æ›´èŒƒå›´å’Œå½±å“ï¼Œæˆ‘å†ç»™ä½ å¯é äº¤ä»˜æ—¶é—´ã€‚'},
      {kw:['æ’æœŸå…ˆåˆ«å†™','å…ˆæŠŠæ´»åšäº†','é—­ç¯'], add:3, truth:'â€œå…ˆåšåæ’æœŸâ€â‰ˆè®¡åˆ’å¤±æ•ˆï¼Œé£é™©åç½®ã€‚', reply:'æˆ‘å…ˆè¡¥æœ€å°æ’æœŸï¼Œä¸ç„¶è¿›åº¦å’Œè´¨é‡éƒ½ä¸å¯æ§ã€‚'}
    ];

    const key = 'anti-neijuan-rank-v1';

    function analyze(text){
      let score = 1;
      const hits = [];
      const truths = [];
      const replies = [];
      for(const r of rules){
        if(r.kw.some(k => text.includes(k))){
          score += r.add;
          hits.push(...r.kw.filter(k=>text.includes(k)));
          truths.push(r.truth);
          replies.push(r.reply);
        }
      }
      score = Math.min(10, score);
      let lv='low', lvText='ä½å·';
      if(score>=7){lv='high';lvText='é«˜å·è­¦æŠ¥';}
      else if(score>=4){lv='mid';lvText='ä¸­åº¦å†…å·';}

      const truth = truths[0] || 'è¿™å¥è¯å·åº¦ä¸é«˜ï¼Œå¯èƒ½åªæ˜¯æ­£å¸¸åä½œã€‚';
      const reply = replies[0] || 'æ”¶åˆ°ï¼Œæˆ‘æŒ‰ä¼˜å…ˆçº§å¤„ç†å¹¶åŒæ­¥è¿›åº¦ã€‚';

      return {score, lv, lvText, truth, reply, hits:[...new Set(hits)]};
    }

    function getRank(){
      try { return JSON.parse(localStorage.getItem(key) || '[]'); }
      catch { return []; }
    }

    function setRank(items){
      localStorage.setItem(key, JSON.stringify(items));
    }

    function saveToRank(text, score){
      const items = getRank();
      const now = new Date();
      const day = now.toISOString().slice(0,10);
      const filtered = items.filter(i => i.day === day);

      const existing = filtered.find(i => i.text === text);
      if(existing){
        existing.score = Math.max(existing.score, score);
        existing.ts = now.getTime();
      } else {
        filtered.push({text, score, ts: now.getTime(), day});
      }
      filtered.sort((a,b)=> b.score - a.score || b.ts - a.ts);
      const top10 = filtered.slice(0,10);
      setRank(top10);
      renderRank();
    }

    function renderRank(){
      const list = document.getElementById('rankList');
      const items = getRank().sort((a,b)=> b.score - a.score || b.ts - a.ts).slice(0,10);
      if(!items.length){
        list.innerHTML = '<div class="empty">è¿˜æ²¡æœ‰ä¸Šæ¦œé‡‘å¥ï¼Œå¿«æµ‹ä¸€å¥åŒäº‹è¯æœ¯ï¼</div>';
        return;
      }
      list.innerHTML = items.map(i => `
        <li>
          ${i.text}
          <span class="pill">å·åº¦ ${i.score}/10</span>
        </li>
      `).join('');
    }

    const input = document.getElementById('input');
    const out = document.getElementById('out');

    document.getElementById('analyze').onclick = ()=>{
      const text = input.value.trim();
      if(!text){ out.textContent='å…ˆè¾“å…¥ä¸€å¥åŒäº‹è¯æœ¯ï½'; return; }
      const r = analyze(text);
      out.innerHTML = `
        <div><b>åŸè¯ï¼š</b>${text}</div>
        <div style="margin-top:8px"><b>çœŸå®ç¿»è¯‘ï¼š</b>${r.truth}</div>
        <div style="margin-top:8px"><span class="score">å·åº¦ï¼š${r.score}/10</span> <span class="lv ${r.lv}">${r.lvText}</span></div>
        <div style="margin-top:8px"><b>å»ºè®®å›å¤ï¼š</b>${r.reply}</div>
        <div style="margin-top:8px;color:#93a3d7">å‘½ä¸­å…³é”®è¯ï¼š${r.hits.length? r.hits.join('ã€'):'æ— '}</div>
      `;
      saveToRank(text, r.score);
    };

    document.getElementById('random').onclick = ()=>{
      input.value = examples[Math.floor(Math.random()*examples.length)];
      document.getElementById('analyze').click();
    };

    document.getElementById('copy').onclick = async ()=>{
      const text = out.innerText.trim();
      if(!text || text.includes('ç­‰ä½ è¾“å…¥')) return;
      try{ await navigator.clipboard.writeText(text); alert('å·²å¤åˆ¶ç»“æœ'); }
      catch{ alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶'); }
    };

    document.getElementById('clearRank').onclick = ()=>{
      if(!confirm('ç¡®å®šæ¸…ç©ºä»Šæ—¥æœ€å·æ¦œå—ï¼Ÿ')) return;
      localStorage.removeItem(key);
      renderRank();
    };

    renderRank();
  </script>
</body>
</html>
